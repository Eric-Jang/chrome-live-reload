/**
 * description: live reload background run init
 * author: rehorn@vip.qq.com
 * date: 2012-04-22
 */(function(a,b){var c=a.LiveReloadSetting;console.log(c);var d={};d.clearAll=document.querySelector("#clearAll"),d.urlList=document.querySelector("#urlList"),d.fields=document.querySelectorAll('.container select, .container input[type="checkbox"]');var e={init:function(){this.initEvents()},initEvents:function(){var a=this,b={onClearAll:function(a){console.log("clearAll"),d.urlList.innerHTML="",c.set("lr_live_list",[])},updateValue:function(a){console.log("update");var b=a.srcElement;b.getAttribute("type")=="checkbox"?c.set(b.id,b.checked):c.set(b.id,b.value),console.log(c.getOption())},onRemoveUrl:function(b){var d=b.srcElement;d.className=="deleteButton"&&(c.removeLiveList(d.getAttribute("url")),a.initUrlList())}};for(var e=0;e<d.fields.length;e++)d.fields[e].getAttribute("type")=="checkbox"?(d.fields[e].checked=!1,c.get(d.fields[e].id)&&(d.fields[e].checked=!0)):d.fields[e].value=""+c.get(d.fields[e].id),d.fields[e].addEventListener("change",b.updateValue,!1);this.initUrlList(),d.urlList.addEventListener("click",b.onRemoveUrl,!1),d.clearAll.addEventListener("click",b.onClearAll,!1)},initUrlList:function(){var a=c.get("lr_live_list"),b="";for(var e=0;e<a.length;e++){var f=a[e];b+='<li><a href="'+f+'" title="'+f+'" target="_blank">'+f+'</a><button class="deleteButton" url="'+f+'">Ã—</button></li>'}d.urlList.innerHTML=b}};e.init()})(window);